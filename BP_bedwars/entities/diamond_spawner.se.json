{
    "format_version": "1.18.0",
    "minecraft:entity": {
        "description": {
            "identifier": "bedwars:diamond_spawner",
            "is_experimental": false,
            "is_spawnable": false,
            "is_summonable": true,
            "scripts": {
                "animate": [
                    "controller_spawn_mode"
                ]
            },
            "animations": {
                "controller_spawn_mode": "controller.animation.diamond_spawner.spawn_mode",
                "spawn_normally": "animation.diamond_spawner.spawn_normally",
                "spawn_per_300_seconds": "animation.diamond_spawner.spawn_per_300_seconds",
                "show_spawning_text": "animation.diamond_spawner.show_spawning_text",
                "show_waiting_text": "animation.diamond_spawner.show_waiting_text"
            }
        },
        "components": {
            "minecraft:physics": { "has_collision": true, "has_gravity": true },
            "minecraft:collision_box": { "height": 0, "width": 0 },
            "minecraft:type_family": { "family": [ "inanimate", "resource_spawner", "diamond_spawner" ] },
            "minecraft:knockback_resistance": { "value": 1 },
            "minecraft:persistent": { },
            "minecraft:health": { "value": 1, "max": 1 },
            "minecraft:damage_sensor": { "triggers": [ { "cause": "all", "deals_damage": false } ] },
            "minecraft:variant": { "value": 0 },
            "minecraft:entity_sensor": { "sensor_range": 2.5, "event_filters": { "test": "distance_to_nearest_player", "value": 2.5, "operator": "<=" }, "event": "reset_spawned_times_while_players_nearby" }
        },
        "events": {
            "spawned_resource": {
                "sequence": [
                    { "filters": { "test": "is_variant", "value": 0, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_1_times" ] } },
                    { "filters": { "test": "is_variant", "value": 1, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_2_times" ] } },
                    { "filters": { "test": "is_variant", "value": 2, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_3_times" ] } },
                    { "filters": { "test": "is_variant", "value": 3, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_4_times" ] } },
                    { "filters": { "test": "is_variant", "value": 4, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_5_times" ] } },
                    { "filters": { "test": "is_variant", "value": 5, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_6_times" ] } },
                    { "filters": { "test": "is_variant", "value": 6, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_7_times" ] } },
                    { "filters": { "test": "is_variant", "value": 7, "operator": "==", "subject": "self" }, "add": { "component_groups": [ "spawned_8_times" ] } }
                ]
            },

            "reset_spawned_times_while_players_nearby": {
                "add": { "component_groups": [ "spawned_0_times" ] }
            },

            "upgrade_spawner": {
                "sequence": [
                    { "filters": { "all_of": [ { "test": "is_family", "value": "tier_1", "operator": "==", "subject": "self" }, { "test": "is_family", "value": "should_not_show_text", "operator": "!=", "subject": "self" } ] }, "add": { "component_groups": [ "tier_2" ] } },
                    { "filters": { "all_of": [ { "test": "is_family", "value": "tier_2", "operator": "==", "subject": "self" }, { "test": "is_family", "value": "should_not_show_text", "operator": "!=", "subject": "self" } ] }, "add": { "component_groups": [ "tier_3" ] } },
                    { "filters": { "all_of": [ { "test": "is_family", "value": "tier_1", "operator": "==", "subject": "self" }, { "test": "is_family", "value": "should_not_show_text", "operator": "==", "subject": "self" } ] }, "add": { "component_groups": [ "tier_2_should_not_show_text" ] } },
                    { "filters": { "all_of": [ { "test": "is_family", "value": "tier_2", "operator": "==", "subject": "self" }, { "test": "is_family", "value": "should_not_show_text", "operator": "==", "subject": "self" } ] }, "add": { "component_groups": [ "tier_3_should_not_show_text" ] } }
                ]
            },
            "spawn_as_tier_1": { "add": { "component_groups": [ "tier_1" ] } },
            "spawn_as_tier_2": { "add": { "component_groups": [ "tier_2" ] } },
            "spawn_as_tier_3": { "add": { "component_groups": [ "tier_3" ] } },
            "spawn_as_tier_1_should_not_show_text": { "add": { "component_groups": [ "tier_1_should_not_show_text" ] } },
            "spawn_as_tier_2_should_not_show_text": { "add": { "component_groups": [ "tier_2_should_not_show_text" ] } },
            "spawn_as_tier_3_should_not_show_text": { "add": { "component_groups": [ "tier_3_should_not_show_text" ] } },

            "hide": { "add": { "component_groups": [ "hide" ] } },
            "show": { "remove": { "component_groups": [ "hide" ] } }
        },
        "component_groups": {

            "tier_1": {
                "minecraft:type_family": { "family": [ "tier_1", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },
            "tier_2": {
                "minecraft:type_family": { "family": [ "tier_2", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },
            "tier_3": {
                "minecraft:type_family": { "family": [ "tier_3", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },
            "tier_1_should_not_show_text": {
                "minecraft:type_family": { "family": [ "tier_1", "should_not_show_text", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },
            "tier_2_should_not_show_text": {
                "minecraft:type_family": { "family": [ "tier_2", "should_not_show_text", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },
            "tier_3_should_not_show_text": {
                "minecraft:type_family": { "family": [ "tier_3", "should_not_show_text", "inanimate", "resource_spawner", "diamond_spawner" ] }
            },

            "spawned_0_times": { "minecraft:variant": { "value": 0 } },
            "spawned_1_times": { "minecraft:variant": { "value": 1 } },
            "spawned_2_times": { "minecraft:variant": { "value": 2 } },
            "spawned_3_times": { "minecraft:variant": { "value": 3 } },
            "spawned_4_times": { "minecraft:variant": { "value": 4 } },
            "spawned_5_times": { "minecraft:variant": { "value": 5 } },
            "spawned_6_times": { "minecraft:variant": { "value": 6 } },
            "spawned_7_times": { "minecraft:variant": { "value": 7 } },
            "spawned_8_times": { "minecraft:variant": { "value": 8 } },

            "hide": {
                "minecraft:is_chested": { }
            }
        }
    }
}